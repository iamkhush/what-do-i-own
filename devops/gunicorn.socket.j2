[Unit]
Description={{ app_name }} socket

[Socket]
ListenStream=/run/{{ app_name }}.sock
# Our service won't need permissions for the socket, since it
# inherits the file descriptor by socket activation.
# Only the nginx daemon will need access to the socket:
SocketUser={{ nginx_user }}
SocketGroup={{ nginx_user }}
# Once the user/group is correct, restrict the permissions:
SocketMode=0660

[Install]
WantedBy=sockets.target
